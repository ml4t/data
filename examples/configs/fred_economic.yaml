# FRED Economic Data Configuration Example
# Federal Reserve Economic Data (FRED) provides free access to 800,000+ economic time series
#
# Get your free API key at: https://fred.stlouisfed.org/docs/api/api_key.html
# Set FRED_API_KEY environment variable or use api_key parameter below

# Storage configuration - Uses Hive partitioning for efficient queries
storage:
  strategy: hive
  base_path: ~/ml4t-data/economic
  compression: zstd
  enable_locking: true
  metadata_tracking: true

# FRED provider configuration
providers:
  - name: fred_main
    type: fred
    enabled: true
    # api_key: ${FRED_API_KEY}  # Uncomment to use env var explicitly
    rate_limit:
      requests_per_second: 1.5  # 90 req/min (FRED allows 120)
      burst_size: 10
      retry_max_attempts: 3
      retry_backoff_factor: 2.0
    timeout: 30
    cache_enabled: true
    cache_ttl: 3600  # 1 hour cache

# Symbol universes for economic data
# FRED series IDs: https://fred.stlouisfed.org/
universes:
  # Market indicators - daily updates
  - name: market_daily
    symbols:
      - VIXCLS       # VIX volatility index
      - SP500        # S&P 500 index
      - DGS10        # 10-Year Treasury yield
      - T10Y2Y       # 10Y-2Y Treasury spread (yield curve)
      - T5YIE        # 5-Year breakeven inflation
      - DCOILWTICO   # WTI crude oil price
      - BAMLC0A0CM   # Investment grade corporate bond spread
    asset_class: ECONOMIC
    provider: fred_main

  # Labor market - monthly updates
  - name: macro_monthly
    symbols:
      - UNRATE       # Unemployment rate
      - PAYEMS       # Total nonfarm payrolls
      - ICSA         # Initial jobless claims (weekly, but monthly for analysis)
      - LNS14000060  # Long-term unemployment rate
    asset_class: ECONOMIC
    provider: fred_main

  # Inflation indicators - monthly updates
  - name: inflation_monthly
    symbols:
      - CPIAUCSL     # CPI All Items
      - PPIACO       # PPI All Commodities
      - CPILFESL     # Core CPI (less food and energy)
      - PCE          # Personal Consumption Expenditure
      - PCEPI        # PCE Price Index
    asset_class: ECONOMIC
    provider: fred_main

  # GDP and output - quarterly updates
  - name: gdp_quarterly
    symbols:
      - GDP          # Nominal GDP
      - GDPC1        # Real GDP
      - GDPPOT       # Potential GDP
      - INDPRO       # Industrial Production Index (monthly but related)
    asset_class: ECONOMIC
    provider: fred_main

  # Financial conditions - daily/weekly
  - name: financial_conditions
    symbols:
      - DFF          # Federal Funds Rate
      - FEDFUNDS     # Effective Federal Funds Rate
      - MORTGAGE30US # 30-Year mortgage rate
      - DTWEXBGS     # Trade-weighted USD index
    asset_class: ECONOMIC
    provider: fred_main

# Dataset configurations
datasets:
  # Daily market indicators
  - name: fred_market_daily
    universe: market_daily
    provider: fred_main
    frequency: DAILY
    update_mode: incremental
    validation_enabled: true
    # Point-in-time note: These are revised infrequently, latest values fine

  # Monthly macro data
  - name: fred_macro_monthly
    universe: macro_monthly
    provider: fred_main
    frequency: MONTHLY
    update_mode: incremental
    validation_enabled: true

  # Monthly inflation data
  - name: fred_inflation_monthly
    universe: inflation_monthly
    provider: fred_main
    frequency: MONTHLY
    update_mode: incremental
    validation_enabled: true
    # Note: CPI/PCE data gets revised, consider vintage dates for research

  # Quarterly GDP data
  - name: fred_gdp_quarterly
    universe: gdp_quarterly
    provider: fred_main
    frequency: QUARTERLY
    update_mode: incremental
    validation_enabled: true
    # Note: GDP gets significantly revised over time (advance, preliminary, final)

  # Financial conditions
  - name: fred_financial_daily
    universe: financial_conditions
    provider: fred_main
    frequency: DAILY
    update_mode: incremental
    validation_enabled: true

# Workflow configurations
workflows:
  # Daily economic data update (market indicators + financial conditions)
  - name: economic_daily
    description: Daily economic indicator update
    datasets:
      - fred_market_daily
      - fred_financial_daily
    enabled: true
    on_error: continue
    schedule:
      type: DAILY
      time: "18:00"  # 6 PM ET (after most daily releases)
      timezone: "US/Eastern"

  # Monthly macro data update
  - name: economic_monthly
    description: Monthly economic data update
    datasets:
      - fred_macro_monthly
      - fred_inflation_monthly
    enabled: true
    on_error: continue
    schedule:
      type: MONTHLY
      day_of_month: 15  # Mid-month to catch BLS releases
      time: "09:00"
      timezone: "US/Eastern"

  # Quarterly GDP update
  - name: economic_quarterly
    description: Quarterly GDP data update
    datasets:
      - fred_gdp_quarterly
    enabled: true
    on_error: continue
    schedule:
      type: QUARTERLY
      month_of_quarter: 2  # 2nd month (expect advance estimate)
      day_of_month: 1
      time: "09:00"
      timezone: "US/Eastern"

# Global settings
log_level: INFO
parallel_downloads: 3  # FRED allows more parallelism

# Notes on FRED data:
# -------------------
# 1. Point-in-Time: FRED data often gets revised (especially GDP, employment).
#    For backtesting research, use vintage_date parameter in FREDProvider.
#
# 2. Frequency Alignment: When combining daily market data with monthly macro:
#    - Use fetch_multiple() with forward_fill=True
#    - Or align in your analysis code after fetching separately
#
# 3. Release Schedules: Key releases to watch:
#    - Employment (BLS): First Friday of month
#    - CPI: ~15th of month
#    - GDP: End of month (advance), then revised twice
#    - FOMC: 8 meetings per year (watch DFF, FEDFUNDS)
#
# 4. API Limits: FRED is generous (120 req/min), but be respectful.
#    This config uses 90 req/min to leave headroom.
